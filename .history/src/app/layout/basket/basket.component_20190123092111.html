<div [@routerTransition]>
   
    <h2>My Basket</h2>
    <br>

    <div *ngIf="!isOnPayment">
    <div class="row">
        <div class="col-lg-6">
            <h4>Total price (with taxes) : {{totalPrice}}€</h4>
            <br>
            <button class="btn btn-primary text-right" (click)="goToPayment()">Buy this Basket</button>        
        </div>
    </div>
    <br>
    <br>

    <h5>My articles</h5>
    <br>
    <table class="table" id="maTable">
        <thead class="thead-inverse">
        <tr>
            <th>Article</th>
            <th>Image</th>
            <th>Quantity</th>
            <th>Price HT</th>
            <th>Taxe</th>
            <th>Total Price</th>
            <th>Delete</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of basketList">
            <td>{{item.product_choose.name}}</td>
            <td><img [src]="urlServer+item.product_choose.picture" height="40" width="40"></td>
            <td>{{item.number}}</td>
            <td>{{item.product_choose.priceHT*item.number}}€</td>
            <td>{{item.product_choose.tva}}%</td>
            <td>{{((item.product_choose.tva*indicetwo)+indice)*(item.product_choose.priceHT*item.number)}}€</td>
            <td><button class="btn btn-danger" (click)="deleteArticle(item)">Delete Article</button></td>
         
        </tr>
        </tbody>
    </table>

    <br>
    <br>
    
    <!--<h5>My past purchases</h5>-->

    </div>

    <div *ngIf="isOnPayment">
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <img src="http://www.pngall.com/wp-content/uploads/2016/03/Paypal-Logo-PNG.png" height="70" width="200">
            <input type="hidden" name="cmd" value="_cart">
            <input type="hidden" name="business" value="klaydsoul@klaydsoul.com">
            <input type="hidden" name="item_name" value="hat">
            <input type="hidden" name="item_number" value="123">
            <input type="hidden" name="amount" value="15.00">
            <input type="hidden" name="email" value="jdoe@zyzzyu.com">
            <input type="image" name="submit"
              src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif"
              alt="PayPal - The safer, easier way to pay online">
          </form>

          <div class="container">
            <div class='row'>
                <div class='col-md-4'></div>
                <div class='col-md-4'>
                  <script src='https://js.stripe.com/v2/' type='text/javascript'></script>
                  <form accept-charset="UTF-8" action="/" class="require-validation" data-cc-on-file="false" data-stripe-publishable-key="pk_bQQaTxnaZlzv4FnnuZ28LFHccVSaj" id="payment-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓" /><input name="_method" type="hidden" value="PUT" /><input name="authenticity_token" type="hidden" value="qLZ9cScer7ZxqulsUWazw4x3cSEzv899SP/7ThPCOV8=" /></div>
                    <div class='form-row'>
                      <div class='col-xs-12 form-group required'>
                        <label class='control-label'>Name on Card</label>
                        <input class='form-control' size='4' type='text'>
                      </div>
                    </div>
                    <div class='form-row'>
                      <div class='col-xs-12 form-group card required'>
                        <label class='control-label'>Card Number</label>
                        <input autocomplete='off' class='form-control card-number' size='20' type='text'>
                      </div>
                    </div>
                    <div class='form-row'>
                      <div class='col-xs-4 form-group cvc required'>
                        <label class='control-label'>CVC</label>
                        <input autocomplete='off' class='form-control card-cvc' placeholder='ex. 311' size='4' type='text'>
                      </div>
                      <div class='col-xs-4 form-group expiration required'>
                        <label class='control-label'>Expiration</label>
                        <input class='form-control card-expiry-month' placeholder='MM' size='2' type='text'>
                      </div>
                      <div class='col-xs-4 form-group expiration required'>
                        <label class='control-label'> </label>
                        <input class='form-control card-expiry-year' placeholder='YYYY' size='4' type='text'>
                      </div>
                    </div>
                    <div class='form-row'>
                      <div class='col-md-12'>
                        <div class='form-control total btn btn-info'>
                          Total:
                          <span class='amount'>$300</span>
                        </div>
                      </div>
                    </div>
                    <div class='form-row'>
                      <div class='col-md-12 form-group'>
                        <button class='form-control btn btn-primary submit-button' type='submit'>Pay »</button>
                      </div>
                    </div>
                    <div class='form-row'>
                      <div class='col-md-12 error form-group hide'>
                        <div class='alert-danger alert'>
                          Please correct the errors and try again.
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
                <div class='col-md-4'></div>
            </div>
        </div>
    </div>


</div>
